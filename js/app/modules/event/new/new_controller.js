var extend=function(e,t){function o(){this.constructor=e}for(var n in t)hasProp.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},hasProp={}.hasOwnProperty;define(["app/app","base.controllers","./new_view"],function(e){return e.module("Event.New",function(e,t,o,n,r,i){return e.Controller=function(o){function n(){return n.__super__.constructor.apply(this,arguments)}return extend(n,o),n.prototype.initialize=function(e){var o;return this.region=e.region,this.layout=this.getLayoutView(),o=t.reqres.request("event:entity:new"),this.layout.on("before:show",function(e){return function(){return e.getHeaderRegion(),e.getFormRegion(o)}}(this)),this.region.show(this.layout)},n.prototype.getLayoutView=function(){return new e.Layout},n.prototype.getHeaderRegion=function(){var t;return t=new e.Header,this.layout.showChildView("header",t)},n.prototype.getFormRegion=function(o){var n;return n=new e.Form({model:o}),n.on("submit",function(e){var o,r;return r=e.model,o=e.collection,n=e.view,t.commands.execute("event:save",r)}),this.layout.showChildView("form",n)},n}(t.Controllers.Base)}),e.Event.New.Controller});